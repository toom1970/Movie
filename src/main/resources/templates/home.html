<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <title>Movie</title>
</head>
<body>
<div class="table-responsive">
    <table class="table table-hover">
        <thead>
        <tr class="active">
            <th>ID</th>
            <th>NAME</th>
            <th>DIRECTOR</th>
            <th>DATE</th>
            <th>MANAGER</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="m: ${movies}">
            <td th:text="${m.getId()}" id="mid"></td>
            <td th:text="${m.getName()}"></td>
            <td th:text="${m.getDirector()}"></td>
            <td th:text="${m.getFormatDate()}"></td>
            <!--            <td th:text="${m.getReleaseDate()}"></td>-->
            <td>
                <button type="button" class="btn btn-default btn-sm btn-info edit"
                        th:onclick="'javascript:jumpEdit('+${m.getId()}+')'">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit
                </button>
                <button type="button" class="btn btn-default btn-sm btn-danger"
                        th:onclick="'javascript:jumpDel('+${m.getId()}+')'">
                    <span class="glyphicon glyphicon-trash delete" aria-hidden="true"></span> Del
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<br>
<div class="text-center">
    <ul class="pagination">
        <li><a th:if="${pages.isIsFirstPage()}" th:href="@{'?page='+${pages.getPageNum()}}">&laquo;</a></li>
        <li><a th:unless="${pages.isIsFirstPage()}" th:href="@{'?page='+${pages.getPageNum()-1}}">&laquo;</a></li>
        <li><a th:href="@{'?page='+${pages.getPageNum()}}" th:text="${pages.getPageNum()}">1</a></li>
        <li><a th:if="${pages.getPages()}>=2" th:href="@{'?page='+${pages.getPageNum()}}+1">2</a></li>
        <li><a th:if="${pages.getPages()}>=3" th:href="@{'?page='+${pages.getPageNum()}}+2">3</a></li>
        <li><a th:if="${pages.getPages()}>=4" th:href="@{'?page='+${pages.getPageNum()}}+3">4</a></li>
        <li><a th:if="${pages.getPages()}>=5" th:href="@{'?page='+${pages.getPageNum()}}+4">5</a></li>
        <li><a th:if="${pages.isIsLastPage()}" th:href="@{'?page='+${pages.getPageNum()}}">&raquo;</a></li>
        <li><a th:unless="${pages.isIsLastPage()}" th:href="@{'?page='+${pages.getPageNum()+1}}">&raquo;</a></li>
    </ul>
</div>
<div class="text-center">
    <input th:unless="${isLogin}" type="button" class="btn btn-success" value="login" onclick=javascrtpt:jump()>
    <input th:if="${isLogin}" type="button" class="btn btn-success" value="logout" onclick=javascrtpt:jumpLogout()>
    <input th:unless="${isLogin}" type="button" class="btn btn-success" value="Add" onclick=javascrtpt:jumpAdd()>
</div>
<form id="formrestful" action="" method="POST">
    <input id="inputrestful" type="hidden" name="_method" value="">
</form>
</body>
<script>
    function jump() {
        window.location.href = "/movie/login";
    }

    function jumpLogout() {
        window.location.href = "/movie/logout";
    }

    function jumpAdd() {
        window.location.href = "/movie/add";
    }

    function jumpDel(id) {
        var formdel = document.getElementById("formrestful");
        var inputvalue = document.getElementById("inputrestful");
        inputvalue.value = "DELETE";
        formdel.action = "/movie/" + id;
        formdel.submit();
    }

    function jumpEdit(id) {
        var formdel = document.getElementById("formrestful");
        var inputvalue = document.getElementById("inputrestful");
        inputvalue.value = "PUT";
        formdel.action = "/movie/" + id;
        formdel.submit();
    }
</script>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
</html>